<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>老虞学golang-字符串 - 虞双齐爱折腾</title><link rel="alternate" hreflang="zh" href="https://yushuangqi.com"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="MobileOptimized" content="width"><meta name="HandheldFriendly" content="true"><meta name="applicable-device" content="pc,mobile"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="theme-color" content="#f8f5ec"><meta name="msapplication-navbutton-color" content="#f8f5ec"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec"><meta name="mobile-web-app-capable" content="yes"><meta name="author" content="虞双齐"><meta name="description" content="在所有编程语言中都涉及到大量的字符串操作，可见熟悉对字符串的操作是何等重要。 Go中的字符串和C#中的一样，字符串内容在初始化后不可修改。 需要"><meta name="keywords" content="智能合约开发, Go语言, 区块链技术"><meta name="generator" content="Hugo 0.37.1"><link rel="canonical" href="https://yushuangqi.com/blog/2013/ysqi-golang-string.html"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link href="/dist/jane.min.css?v=2.7.0" rel="stylesheet"><link href="https://cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css" rel="stylesheet" crossorigin="anonymous"><meta property="og:title" content="老虞学golang-字符串"><meta property="og:description" content="在所有编程语言中都涉及到大量的字符串操作，可见熟悉对字符串的操作是何等重要。 Go中的字符串和C#中的一样，字符串内容在初始化后不可修改。 需要"><meta property="og:type" content="article"><meta property="og:url" content="https://yushuangqi.com/blog/2013/ysqi-golang-string.html"><meta property="article:published_time" content="2013-04-06T00:00:00&#43;00:00"><meta property="article:modified_time" content="2013-04-06T00:00:00&#43;00:00"><meta itemprop="name" content="老虞学golang-字符串"><meta itemprop="description" content="在所有编程语言中都涉及到大量的字符串操作，可见熟悉对字符串的操作是何等重要。 Go中的字符串和C#中的一样，字符串内容在初始化后不可修改。 需要"><meta itemprop="datePublished" content="2013-04-06T00:00:00&#43;00:00"><meta itemprop="dateModified" content="2013-04-06T00:00:00&#43;00:00"><meta itemprop="wordCount" content="1972"><meta itemprop="keywords" content="Golang,笔记,教程,"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="老虞学golang-字符串"><meta name="twitter:description" content="在所有编程语言中都涉及到大量的字符串操作，可见熟悉对字符串的操作是何等重要。 Go中的字符串和C#中的一样，字符串内容在初始化后不可修改。 需要"><!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]--><!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]--></head><body><div id="mobile-navbar" class="mobile-navbar"><div class="mobile-header-logo"><a href="/" class="logo">虞双齐爱折腾</a></div><div class="mobile-navbar-icon"><span></span> <span></span> <span></span></div></div><nav id="mobile-menu" class="mobile-menu slideout-menu"><ul class="mobile-menu-list"><a href="/"><li class="mobile-menu-item">首页</li></a><a href="/post.html"><li class="mobile-menu-item">归档</li></a><a href="/tags.html"><li class="mobile-menu-item">标签</li></a><a href="/categories.html"><li class="mobile-menu-item">分类</li></a><a href="/about.html"><li class="mobile-menu-item">关于</li></a></ul></nav><header id="header" class="header container"><div class="logo-wrapper"><a href="/" class="logo">虞双齐爱折腾</a></div><nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item"><a class="menu-item-link" href="/">首页</a></li><li class="menu-item"><a class="menu-item-link" href="/post.html">归档</a></li><li class="menu-item"><a class="menu-item-link" href="/tags.html">标签</a></li><li class="menu-item"><a class="menu-item-link" href="/categories.html">分类</a></li><li class="menu-item"><a class="menu-item-link" href="/about.html">关于</a></li></ul></nav></header><div id="mobile-panel"><main id="main" class="main bg-llight"><div class="content-wrapper"><div id="content" class="content container"><article class="post bg-white"><header class="post-header"><h1 class="post-title">老虞学golang-字符串</h1><div class="post-meta"><span class="post-time">2013-04-06</span><div class="post-category"><a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%BC%80%E5%8F%91/">编程语言与开发</a></div><span class="more-meta">约 1972 字 </span><span class="more-meta">预计阅读 4 分钟</span></div></header><div class="post-toc" id="post-toc"><h2 class="post-toc-title">文章目录</h2><div class="post-toc-content always-active"><nav id="TableOfContents"><ul><li><ul><li><a href="#初始化">初始化</a></li><li><a href="#字符串操作">字符串操作</a><ul><li><a href="#对字符串的操作非常重要-来了解下strings包中提供了哪些函数">对字符串的操作非常重要，来了解下strings包中提供了哪些函数</a></li></ul></li></ul></li></ul></nav></div></div><div class="post-content"><blockquote><p><strong>在所有编程语言中都涉及到大量的字符串操作，可见熟悉对字符串的操作是何等重要。 Go中的字符串和C#中的一样，字符串内容在初始化后不可修改。 需要注意的是在Go中字符串是有UTF-8编码的，请注意保存文件时将文件编码格式改成UTF-8(特别是在windows下)。</strong></p></blockquote><h2 id="初始化">初始化</h2><pre><code class="language-Go">    var str string //声明一个字符串
    str = &quot;laoYu&quot;  //赋值
    ch :=str[0]    //获取第一个字符
    len :=len(str) //字符串的长度,len是内置函数 ,len=5
</code></pre><h2 id="字符串操作">字符串操作</h2><blockquote><p><strong>编码过程中避免不了中文字符，那我们该如何提取一个中文呢？首先我们要知道string[index]获取的是字符byte,就无法像C#中<code>&quot;老虞&quot;[0]</code>来取到‘老’，在Go中需要将字符串转换成rune数组，runne数组中就可以通过数组下标获取一个汉字所标识的Unicode码，再将Unicode码按创建成字符串即可。</strong></p></blockquote><p><a href="https://github.com/devYu/GoLangStudy/blob/master/codeDemo/strings/stringDemo.go">查看示例代码</a></p><pre><code class="language-Go">    str :=&quot;laoYu老虞&quot;

    for  i:=0;i&lt;len(str);i++ {
             fmt.Println(str[i])
    }

    for  i,s :=  range str {
            fmt.Println(i,&quot;Unicode(&quot;,s,&quot;) string=&quot;,string(s))
    }

    r := []rune(str)
    fmt.Println(&quot;rune=&quot;,r)
    for i:=0;i&lt;len(r) ; i++ {
           fmt.Println(&quot;r[&quot;,i,&quot;]=&quot;,r[i],&quot;string=&quot;,string(r[i]))
    }

    Outut：
    108
    97
    111
  	89
  	117
  	232
  	128
  	129
  	232
  	153
  	158
  	0 Unicode( 108 ) string= l
  	1 Unicode( 97 ) string= a
  	2 Unicode( 111 ) string= o
  	3 Unicode( 89 ) string= Y
  	4 Unicode( 117 ) string= u
  	5 Unicode( 32769 ) string= 老
  	8 Unicode( 34398 ) string= 虞
  	rune= [108 97 111 89 117 32769 34398]
  	r[ 0 ]= 108 string= l
  	r[ 1 ]= 97 string= a
  	r[ 2 ]= 111 string= o
  	r[ 3 ]= 89 string= Y
  	r[ 4 ]= 117 string= u
  	r[ 5 ]= 32769 string= 老
  	r[ 6 ]= 34398 string= 虞
</code></pre><h3 id="对字符串的操作非常重要-来了解下strings包中提供了哪些函数">对字符串的操作非常重要，来了解下strings包中提供了哪些函数</h3><p><strong>获取总字节数</strong> <code>func Len(v type) int</code></p><blockquote><p>len函数是Go中内置函数，不引入strings包即可使用。len(string)返回的是字符串的字节数。len函数所支持的入参类型如下：</p><ul><li>len(Array) 数组的元素个数</li><li>len(*Array) 数组指针中的元素个数,如果入参为nil则返回0</li><li>len(Slice) 数组切片中元素个数,如果入参为nil则返回0</li><li>len(map) 字典中元素个数,如果入参为nil则返回0</li><li>len(Channel) Channel buffer队列中元素个数</li></ul></blockquote><p><a href="https://github.com/devYu/GoLangStudy/blob/master/codeDemo/strings/lenDemo.go">查看示例代码</a></p><pre><code class="language-Go">    str :=&quot;laoYu老虞&quot;
    str2 :=&quot;laoYu&quot;
    fmt.Println(&quot;len(&quot;,str,&quot;)=&quot;,len(str))      //len=11=5+6,一个汉字在UTF-8&gt;中占3个字节
    fmt.Println(&quot;len(&quot;,str2,&quot;)=&quot;,len(str2))    //len=5
    fmt.Println(&quot;str[0]=&quot;,str[0])              //l

    str :=&quot;str&quot;
    arr :=[5]int{1,2,3}
    slice :=make([]int,5)

    m :=make(map[int] string)
    m[2]=&quot;len&quot;

    ch :=make(chan int)

    fmt.Println(&quot;len(string)=&quot;,len(str))   //3
    fmt.Println(&quot;len(array)=&quot;,len(arr))     //5invalid argument user (type *UserInfo) for len

    fmt.Println(&quot;len(slice)=&quot;,len(slice))   //5
    fmt.Println(&quot;len(map)=&quot;,len(m))         //1
    fmt.Println(&quot;len(chat)=&quot;,len(ch))       //0

    //user :=&amp;UserInfo{id:1,name:&quot;laoYu&quot;}
    //interger :=2
    //fmt.Println(&quot;len(my struct)=&quot;,len(user))//invalid argument user (type *UserInfo) for len
    //fmt.Println(&quot;len(interger)=&quot;,len(interger))

    var str2 string
    var arr2  [5]int
    var slice2  []int
    var  m2 map[int] string
    var  ch2 chan int

    fmt.Println(&quot;len(string)=&quot;,len(str2))    //0
    fmt.Println(&quot;len(array)=&quot;,len(arr2))     //5
    fmt.Println(&quot;len(slice)=&quot;,len(slice2))   //0
    fmt.Println(&quot;len(map)=&quot;,len(m2))         //0
    fmt.Println(&quot;len(chat)=&quot;,len(ch2))       //0
</code></pre><p><strong>字符串中是否包含某字符串</strong> <code>func Contains(s, substr string) bool</code></p><blockquote><p>确定是否包含某字符串，这是区分大小写的。实际上内部是通过Index(s,sub string) int 实现的。如果索引!=-1则表示包含该字符串。空字符串&rdquo;&ldquo;在任何字符串中均存在。</p></blockquote><p><strong>源代码</strong></p><pre><code class="language-Go">    // Contains returns true if substr is within s.
    func Contains(s, substr string) bool {
         return Index(s, substr) != -1
    }
</code></pre><p>**示例，使用请需导入包:&rsquo; import &ldquo;strings&rdquo; &lsquo; **</p><p><a href="https://github.com/devYu/GoLangStudy/blob/master/codeDemo/strings/containsDemo.go">查看示例代码</a></p><pre><code class="language-Go">    str :=&quot;laoYuStudyGotrue是否包含某字符串&quot;
    fmt.Println(strings.Contains(str,&quot;go&quot;))         //false
    fmt.Println(strings.Contains(str,&quot;Go&quot;))         //true
    fmt.Println(strings.Contains(str,&quot;laoyu&quot;))      //false
    fmt.Println(strings.Contains(str,&quot;是&quot;))         //true
	fmt.Println(strings.Contains(str,&quot;&quot;)) 			//true
</code></pre><blockquote><p>在实际工作中常需要在不区分大小写的情况下确认是否包含某字符串,(我们应该减少这种情况，以免每次验证时都需要进行一次大小写转换)。 这里我局部修改源代码提供一个验证字符串中是否包含某字符串的函数,当然你也可以直接使用<code>strings.Contains(strings.ToLower(s),strings.ToLower(substr))</code></p><pre><code class="language-Go">    str := &quot;laoYuStudyGotrue是否包含某字符串&quot;
    fmt.Println(Contains(str, &quot;go&quot;, true))  //true
    fmt.Println(Contains(str,&quot;go&quot;,false))   //false
</code></pre></blockquote><pre><code class="language-Go">		//在字符串s中是否包含字符串substr,ignoreCase表示是否忽略大小写
		func Contains(s string, substr string, ignoreCase bool) bool {
				return Index(s, substr, ignoreCase) != -1

		}

		//字符串subst在字符串s中的索引位置,ignoreCase表示是否忽略大小写
		func Index(s string, sep string, ignoreCase bool) int {

				n := len(sep)
				if n == 0 {
				        return 0
				}

				//to Lower
				if ignoreCase == true {
				        s = strings.ToLower(s)
				        sep = strings.ToLower(sep)
				}

				c := sep[0]
				if n == 1 {
				        // special case worth making fast
				        for i := 0; i &lt; len(s); i++ {
				                if s[i] == c {
				                        return i
				                }
				        }
				        return -1
				}
				// n &gt; 1
				for i := 0; i+n &lt;= len(s); i++ {
				        if s[i] == c &amp;&amp; s[i:i+n] == sep {
				                return i
				        }
				}
				return -1
		}
</code></pre><p>** 获取字符串sep在字符串s中出现的次数 ** <code>Count(s,sep string)</code> &gt; 注意：如果sep=&ldquo;&ldquo;，则无论s为何字符串都会返回 len(s)+1</p><p><a href="https://github.com/devYu/GoLangStudy/blob/master/codeDemo/strings/countDemo.go">查看示例代码</a></p><pre><code class="language-Go">    fmt.Println(strings.Count(&quot;laoYuStudyGo&quot;, &quot;o&quot;))                 //2
    fmt.Println(strings.Count(&quot;laoYuStudyGo&quot;, &quot;O&quot;))                 //0
    fmt.Println(strings.Count(&quot;laoYuStudyGo&quot;, &quot;&quot;))                  //13=12+1
    fmt.Println(strings.Count(&quot;laoYuStudyGo老虞学习Go语言&quot;, &quot;虞&quot;))  //1
    fmt.Println(strings.Count(&quot;laoYuStudyGo老虞学习Go语言&quot;, &quot;Go&quot;))  //2
    fmt.Println(strings.Count(&quot;laoYuStudyGo老虞学习Go语言&quot;, &quot;老虞&quot;))//1
    fmt.Println(strings.Count(&quot;&quot;, &quot;&quot;))                             //1=0+1
    fmt.Println(strings.Count(&quot;aaaaaaaa&quot;,&quot;aa&quot;))                     //4
    fmt.Println(strings.Count(&quot;laoYuStudyGo_n&quot;,&quot;\n&quot;))               //0
</code></pre><p>** 使用（多个）空格分割字符串 Fields(s string) ,返回分割后的数组 ** &gt; 将字符串分割成数组，其分割符为空格。</p><p><a href="https://github.com/devYu/GoLangStudy/blob/master/codeDemo/strings/fieldsDemo.go">查看示例代码</a></p><pre><code class="language-Go">    fmt.Println(strings.Fields(&quot;lao Yu Study Go &quot;)) //OutPut: [lao Yu Study Go]
    fmt.Println(strings.Fields(&quot;   Go    &quot;))        //[Go]
    fmt.Println(strings.Fields(&quot;&quot;))                 //[]
    fmt.Println(strings.Fields(&quot; \n go&quot;))           //[go]
</code></pre><p>** 其实其内部实现调用的是FieldsFunc(s,unicode.IsSpace),我们也可以自定义分割方式 **</p><pre><code class="language-Go">    canSplit := func (c rune)  bool { return c=='#'}
    fmt.Println(strings.FieldsFunc(&quot;lao###Yu#Study####Go#G &quot;,canSplit)) //[lao Yu Study Go G&lt;space&gt;]
</code></pre><p>** 检查字符串是否已某字符串开头 ** HasPrefix(s,prefix string) bool</p><p>** 如果想查看更多关于strings包下的字符串操作函数，请查看 **</p><ul><li><a href="https://golang.org/pkg/strings">官方strings包地址</a></li><li><a href="https://github.com/astaxie/gopkg/tree/master/strings">对应的函数翻译地址</a></li></ul></div><div style="height:130px"><div class="post-copyright" style="float:left"><p class="copyright-item"><span class="item-title">文章作者</span> <span class="item-content">虞双齐</span></p><p class="copyright-item"><span class="item-title">上次更新</span> <span class="item-content">2013-04-06</span></p><p class="copyright-item"><span class="item-title">许可协议</span> <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span></p></div><div class="post-copyright" style="float:right"><a href="https://info.flagcounter.com/8B1z"><img src="https://s05.flagcounter.com/countxl/8B1z/bg_FFFFFF/txt_000000/border_CCCCCC/columns_4/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/percent_0/" alt="Flag Counter" border="0"></a></div></div><div class="post-reward"><input type="checkbox" name="reward" id="reward" hidden> <label class="reward-button" for="reward">赞赏支持</label><div class="qr-code"><label class="qr-code-image" for="reward"><img class="image" src="/img/donateMe_wechat.png"> <span>微信打赏</span></label></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/golang.html">Golang</a> <a href="/tags/%E7%AC%94%E8%AE%B0.html">笔记</a> <a href="/tags/%E6%95%99%E7%A8%8B.html">教程</a></div><nav class="post-nav"><a class="prev" href="/blog/2013/ysqi-golang-function-1.html"><i class="iconfont icon-left"></i> <span class="prev-text nav-default">老虞学Golang-函数上</span> <span class="prev-text nav-mobile">上一篇</span> </a><a class="next" href="/blog/2013/ysqi-golang-const.html"><span class="next-text nav-default">老虞学Golang-常量</span> <span class="prev-text nav-mobile">下一篇</span> <i class="iconfont icon-right"></i></a></nav></footer><div id="comments-gitment"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitment@0.0.3/style/default.min.css" crossorigin="anonymous"><script src="https://cdn.jsdelivr.net/npm/gitment@0.0.3/dist/gitment.browser.min.js" crossorigin="anonymous"></script><script type="text/javascript">const gitment = new Gitment({
    id: '2013-04-06 00:00:00 \x2b0000 UTC',
    title: '老虞学golang-字符串',
    link: decodeURI(location.href),
    desc: '在所有编程语言中都涉及到大量的字符串操作，可见熟悉对字符串的操作是何等重要。 Go中的字符串和C#中的一样，字符串内容在初始化后不可修改。 需要',
    owner: 'ysqi',
    repo: 'ysqi\/ysqi.github.io',
    oauth: {
      client_id: '639ba986c281b9fcf382',
      client_secret: 'b5862135f283dd308a7f226c06980cf50b8e82f1'
    }
  })
  gitment.render('comments-gitment')</script><noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript></article></div></div></main><footer id="footer" class="footer"><div class="social-links"><a href="mailto:ysqi@yushuangqi.com" rel="me" class="iconfont icon-email" title="email"></a> <a href="http://github.com/ysqi" rel="me" class="iconfont icon-github" title="github"></a> <a href="https://weibo.com/234665601" rel="me" class="iconfont icon-weibo" title="weibo"></a> <a href="https://www.zhihu.com/people/_ysqi/" rel="me" class="iconfont icon-zhihu" title="zhihu"></a> <a href="https://yushuangqi.com/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a></div><div class="copyright"><span class="power-by">Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a> </span><span class="division">|</span> <span class="theme-info">Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a> </span><span class="copyright-year">&copy; 2014 - 2018 <span class="heart"><i class="iconfont icon-heart"></i> </span><span class="author">虞双齐</span></span></div></footer><div class="back-to-top" id="back-to-top"><i class="iconfont icon-up"></i></div></div><script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js" crossorigin="anonymous"></script><script type="text/javascript" src="https://cdn.bootcss.com/slideout/1.0.1/slideout.min.js" crossorigin="anonymous"></script><script type="text/javascript" src="https://cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" crossorigin="anonymous"></script><script type="text/javascript" src="/dist/jane.min.js?v=2.7.0"></script><script type="text/javascript">window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };</script><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script><script id="baidu_analytics">var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?a16b3275b071ec0efc507a05422a7156";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();</script></body></html>