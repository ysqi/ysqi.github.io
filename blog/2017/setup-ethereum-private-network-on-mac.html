<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Mac下搭建以太坊私有链 - 虞双齐的博客</title><link rel="alternate" hreflang="zh" href="https://yushuangqi.com"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="MobileOptimized" content="width"><meta name="HandheldFriendly" content="true"><meta name="applicable-device" content="pc,mobile"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="theme-color" content="#f8f5ec"><meta name="msapplication-navbutton-color" content="#f8f5ec"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec"><meta name="mobile-web-app-capable" content="yes"><meta name="author" content="虞双齐"><meta name="description" content="在熟悉了解以太坊Ethereum时，为加快测试和掌握。在本机搭建私有链环境是必须的。 小编摸索一段时间，总算了解到以太坊的总体运行环境。下面以"><meta name="keywords" content="智能合约开发, Go语言, 区块链技术"><meta name="generator" content="Hugo 0.37.1"><link rel="canonical" href="https://yushuangqi.com/blog/2017/setup-ethereum-private-network-on-mac.html"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link href="/dist/jane.min.css?v=2.7.0" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous"><meta property="og:title" content="Mac下搭建以太坊私有链"><meta property="og:description" content="在熟悉了解以太坊Ethereum时，为加快测试和掌握。在本机搭建私有链环境是必须的。 小编摸索一段时间，总算了解到以太坊的总体运行环境。下面以"><meta property="og:type" content="article"><meta property="og:url" content="https://yushuangqi.com/blog/2017/setup-ethereum-private-network-on-mac.html"><meta property="article:published_time" content="2017-09-09T10:22:26&#43;08:00"><meta property="article:modified_time" content="2017-09-09T10:22:26&#43;08:00"><meta itemprop="name" content="Mac下搭建以太坊私有链"><meta itemprop="description" content="在熟悉了解以太坊Ethereum时，为加快测试和掌握。在本机搭建私有链环境是必须的。 小编摸索一段时间，总算了解到以太坊的总体运行环境。下面以"><meta itemprop="datePublished" content="2017-09-09T10:22:26&#43;08:00"><meta itemprop="dateModified" content="2017-09-09T10:22:26&#43;08:00"><meta itemprop="wordCount" content="3755"><meta itemprop="keywords" content="以太坊,"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Mac下搭建以太坊私有链"><meta name="twitter:description" content="在熟悉了解以太坊Ethereum时，为加快测试和掌握。在本机搭建私有链环境是必须的。 小编摸索一段时间，总算了解到以太坊的总体运行环境。下面以"><!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]--><!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]--></head><body><div id="mobile-navbar" class="mobile-navbar"><div class="mobile-header-logo"><a href="/" class="logo">虞双齐的博客</a></div><div class="mobile-navbar-icon"><span></span> <span></span> <span></span></div></div><nav id="mobile-menu" class="mobile-menu slideout-menu"><ul class="mobile-menu-list"><a href="/"><li class="mobile-menu-item">首页</li></a><a href="/series.html"><li class="mobile-menu-item">专题</li></a><a href="/categories.html"><li class="mobile-menu-item">分类</li></a><a href="/tags.html"><li class="mobile-menu-item">标签</li></a><a href="/post.html"><li class="mobile-menu-item">归档</li></a><a href="/about.html"><li class="mobile-menu-item">关于</li></a></ul></nav><header id="header" class="header container"><div class="logo-wrapper"><a href="/" class="logo">虞双齐的博客</a></div><nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item"><a class="menu-item-link" href="/">首页</a></li><li class="menu-item"><a class="menu-item-link" href="/series.html">专题</a></li><li class="menu-item"><a class="menu-item-link" href="/categories.html">分类</a></li><li class="menu-item"><a class="menu-item-link" href="/tags.html">标签</a></li><li class="menu-item"><a class="menu-item-link" href="/post.html">归档</a></li><li class="menu-item"><a class="menu-item-link" href="/about.html">关于</a></li></ul></nav></header><div id="mobile-panel"><main id="main" class="main bg-llight"><div class="content-wrapper"><div id="content" class="content container"><article class="post bg-white"><header class="post-header"><h1 class="post-title">Mac下搭建以太坊私有链</h1><div class="post-meta"><span class="post-time">2017-09-09</span><div class="post-category"><a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%BC%80%E5%8F%91.html">编程语言与开发</a></div><span class="more-meta">约 3755 字 </span><span class="more-meta">预计阅读 8 分钟</span></div></header><div class="post-toc" id="post-toc"><h2 class="post-toc-title">文章目录</h2><div class="post-toc-content always-active"><nav id="TableOfContents"><ul><li><ul><li><a href="#配置前环境准备">配置前环境准备</a><ul><li><a href="#安装以太坊客户端">安装以太坊客户端</a></li><li><a href="#初始化创世区块">初始化创世区块</a></li><li><a href="#初始化账号">初始化账号</a></li><li><a href="#进入控制台">进入控制台</a></li></ul></li><li><a href="#启动挖矿">启动挖矿</a></li><li><a href="#安装使用以太坊钱包">安装使用以太坊钱包</a></li><li><a href="#结尾">结尾</a></li></ul></li></ul></nav></div></div><div class="post-content"><p>在熟悉了解以太坊Ethereum时，为加快测试和掌握。在本机搭建私有链环境是必须的。 小编摸索一段时间，总算了解到以太坊的总体运行环境。下面以go-ethereum和以太坊钱包为例，详细步骤记录如何在Mac下搭建以太坊私有链运行环境。</p><h2 id="配置前环境准备">配置前环境准备</h2><h3 id="安装以太坊客户端">安装以太坊客户端</h3><p>实际以太坊运行有多个不同语言实现的客户端，是多样的。可为不同用户选择他们所熟悉的客户端。</p><table><thead><tr><th>客户端</th><th>开发语言</th><th>开发者</th></tr></thead><tbody><tr><td><a href="http://ethdocs.org/en/latest/ethereum-clients/go-ethereum/index.html#go-ethereum">go-ethereum</a></td><td>Go</td><td><a href="https://ethereum.org/foundation">以太坊基金会</a></td></tr><tr><td><a href="http://ethdocs.org/en/latest/ethereum-clients/parity/index.html#parity">Parity</a></td><td>Rust</td><td><a href="https://parity.io/">Ethcore</a></td></tr><tr><td><a href="http://ethdocs.org/en/latest/ethereum-clients/cpp-ethereum/index.html#cpp-ethereum">cpp-ethereum</a></td><td>C++</td><td><a href="https://ethereum.org/foundation">以太坊基金会</a></td></tr><tr><td><a href="http://ethdocs.org/en/latest/ethereum-clients/pyethapp/index.html#pyethapp">pyethapp</a></td><td>Python</td><td><a href="https://ethereum.org/foundation">以太坊基金会</a></td></tr><tr><td><a href="http://ethdocs.org/en/latest/ethereum-clients/ethereumjs-lib/index.html#ethereumjs-lib">ethereumjs-lib</a></td><td>Javascript</td><td><a href="https://ethereum.org/foundation">以太坊基金会</a></td></tr><tr><td><a href="http://ethdocs.org/en/latest/ethereum-clients/ethereumj/index.html#ethereum-j">Ethereum(J)</a></td><td>Java</td><td><a href="http://www.ether.camp">ether camp</a></td></tr><tr><td><a href="http://ethdocs.org/en/latest/ethereum-clients/ruby-ethereum/index.html#ruby-ethereum">ruby-ethereum</a></td><td>Ruby</td><td><a href="https://github.com/janx/">国人Xie Jan</a></td></tr><tr><td><a href="http://ethdocs.org/en/latest/ethereum-clients/ethereumh/index.html#ethereumh">ethereumH</a></td><td>Haskell</td><td><a href="http://www.blockapps.net/">BlockApps</a></td></tr></tbody></table><p>因为以太坊客户端以 go-ethereum 为主，故搭建私有链也使用该客户端。</p><ul><li><a href="https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Mac">Mac OS X上安装说明</a></li><li><a href="https://github.com/ethereum/go-ethereum/wiki/Installation-instructions-for-Windows">Windows 上安装说明</a></li></ul><p>在Mac上安装细节如下： 在使用brew前，需自行安装brew软件管理工具(<a href="http://brew.sh)。">http://brew.sh)。</a> 因为以太坊客户端涉及到多个依赖安装，故先tap再安装</p><pre><code class="language-shell">brew tap ethereum/ethereum 
brew install ethereum 
</code></pre><p>可通过参数<code>--devel</code>直接安装开发版本(<strong>可选</strong>)</p><pre><code class="language-shell">brew install ethereum --devel 
</code></pre><p>安装完成后，可执行命令<code>geth version</code>查看版本信息，结果如下：</p><pre><code class="language-text">Geth
Version: 1.6.7-stable
Git Commit: ab5646c532292b51e319f290afccf6a44f874372
Architecture: amd64
Protocol Versions: [63 62]
Network Id: 1
Go Version: go1.9
Operating System: darwin
GOPATH=/Users/one/Documents/dev/go
GOROOT=/usr/local/Cellar/go/1.9/libexec
</code></pre><p>其中 <code>geth</code>为客户端命令。</p><h3 id="初始化创世区块">初始化创世区块</h3><p>因为geth默认的文件存储路径是：<code>$HOME/Library/Ethereum/</code> ，故为运行方便，小编将配置文件等均放置在此目录。</p><blockquote><p><strong>坑</strong> : geth 是支持指定存储目录的<code>--datadir</code>，但后面会遇到各种奇怪问题，如矿工一直不挖矿<a href="https://github.com/ethereum/go-ethereum/issues/2174">Issue</a>等。</p></blockquote><pre><code class="language-json">{
  &quot;nonce&quot;: &quot;0x0000000000000042&quot;,
  &quot;difficulty&quot;: &quot;0x020000&quot;,
  &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,
  &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,
  &quot;timestamp&quot;: &quot;0x00&quot;,
  &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,
  &quot;extraData&quot;: &quot;0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa&quot;,
  &quot;gasLimit&quot;: &quot;0x4c4b40&quot;,
  &quot;config&quot;: {
      &quot;chainId&quot;: 15,
      &quot;homesteadBlock&quot;: 0,
      &quot;eip155Block&quot;: 0,
      &quot;eip158Block&quot;: 0
  },
  &quot;alloc&quot;: { }
}
</code></pre><p>将创世初始化文件保存到<code>$HOME/Library/Ethereum/</code>下文件名genesis.json。 初始区块是区块链的起始 — 第一个区块，区块0，唯一没有指向前面区块的一个区块。协议确保其他节点不会和你的区块链一致，除非他们和你有相同的初始区块，这样你想创建多少私有测试网区块链，就可以创建多少！</p><p>执行初始化：</p><pre><code class="language-shell">cd $HOME/Library/Ethereum/
geth  init genesis.json
</code></pre><p>执行后，将提示成功初始化创世区。</p><pre><code class="language-text">geth  init genesis.json
WARN [09-09|10:27:44] No etherbase set and no accounts found as default
INFO [09-09|10:27:44] Allocated cache and file handles        database=/Users/one/Library/Ethereum/geth/chaindata cache=16 handles=16
INFO [09-09|10:27:44] Writing custom genesis block
INFO [09-09|10:27:44] Successfully wrote genesis state        database=chaindata                                        hash=bd0e7a…9aadd0
INFO [09-09|10:27:44] Allocated cache and file handles        database=/Users/one/Library/Ethereum/geth/lightchaindata cache=16 handles=16
INFO [09-09|10:27:44] Writing custom genesis block
INFO [09-09|10:27:44] Successfully wrote genesis state        database=lightchaindata                                        hash=bd0e7a…9aadd0
</code></pre><p>此时可看到该目录下会多出两个文件夹:geth和keystore</p><pre><code class="language-text">├── genesis.json
├── geth
│  ├── chaindata
│  │  ├── 000001.log
│  │  ├── CURRENT
│  │  ├── LOCK
│  │  ├── LOG
│  │  └── MANIFEST-000000
│  └── lightchaindata
│      ├── 000001.log
│      ├── CURRENT
│      ├── LOCK
│      ├── LOG
│      └── MANIFEST-000000
└── keystore
</code></pre><h3 id="初始化账号">初始化账号</h3><p>向将密码明文保存到文本文件中，本文中密码将全部是<code>abc</code></p><pre><code class="language-shell">cd $HOME/Library/Ethereum/
echo &quot;abc&quot; &gt; pwd.txt 
</code></pre><p>运行命令创建账户</p><pre><code>geth  -password pwd.txt account new
WARN [09-09|10:33:10] No etherbase set and no accounts found as default
Address: {e7a614776754b7c7ef3a1ef6430d29e90411fd75}
</code></pre><p>虽然此账户可以在以太坊的JavaScript控制台中生成，但我一般直接通过命令工具生成，关于<code>geth account</code>命令还有更多信息：</p><pre><code class="language-text">SAGE:
  geth account [options] command [command options] [arguments...] 

COMMANDS:
  list    汇总打印所有账号
  new     创建一个新账号
  update  更新已存在的账户
  import  导入私钥生成新的账号
  help, h 帮助
</code></pre><pre><code class="language-shell">geth account list 
</code></pre><p>你应该可以看到上面所创建的账号。</p><pre><code class="language-text">Account #0: {e7a614776754b7c7ef3a1ef6430d29e90411fd75} keystore:///Users/one/Library/Ethereum/keystore/UTC--2017-09-09T02-33-10.598872595Z--e7a614776754b7c7ef3a1ef6430d29e90411fd75
</code></pre><p>表明账号的私钥保存在keystore文件夹下。</p><h3 id="进入控制台">进入控制台</h3><pre><code class="language-shell">geth  --networkid 9999 console
</code></pre><p>运行命令，将进入控制台，打印出如下信息。该信息非常重要。能告诉你运行时环境与配置信息。</p><ul><li>Allocated cache and file handles 缓存存放目录</li><li>Disk storage enabled for ethash caches 数据存放目录</li><li>Disk storage enabled for ethash DAGs DAG数据存放目录</li><li>IPC endpoint opened IPC地址，<strong>重要</strong>，关系到后续以太坊钱包的链接</li></ul><pre><code class="language-text">INFO [09-09|10:40:36] Starting peer-to-peer node              instance=Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9
INFO [09-09|10:40:36] Allocated cache and file handles        database=/Users/one/Library/Ethereum/geth/chaindata cache=128 handles=1024
WARN [09-09|10:40:36] Upgrading chain database to use sequential keys
INFO [09-09|10:40:36] Database conversion successful
INFO [09-09|10:40:36] Initialised chain configuration          config=&quot;{ChainID: 15 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot;
INFO [09-09|10:40:36] Disk storage enabled for ethash caches  dir=/Users/one/Library/Ethereum/geth/ethash count=3
INFO [09-09|10:40:36] Disk storage enabled for ethash DAGs    dir=/Users/one/.ethash                      count=2
WARN [09-09|10:40:36] Upgrading db log bloom bins
INFO [09-09|10:40:36] Bloom-bin upgrade completed              elapsed=68.449µs
INFO [09-09|10:40:36] Initialising Ethereum protocol          versions=&quot;[63 62]&quot; network=9999
INFO [09-09|10:40:36] Loaded most recent local header          number=0 hash=bd0e7a…9aadd0 td=131072
INFO [09-09|10:40:36] Loaded most recent local full block      number=0 hash=bd0e7a…9aadd0 td=131072
INFO [09-09|10:40:36] Loaded most recent local fast block      number=0 hash=bd0e7a…9aadd0 td=131072
INFO [09-09|10:40:36] Starting P2P networking
INFO [09-09|10:40:38] UDP listener up                          self=enode://f28939fbbd6038c074f322b656f314250bbf7372523ee6d7d2fd6b67f86dba3f41cdf394ab3c57bd105cb96bec70337c6c19a09ca794b6f0c36c3d04119c7c39@[::]:30303
INFO [09-09|10:40:38] RLPx listener up                        self=enode://f28939fbbd6038c074f322b656f314250bbf7372523ee6d7d2fd6b67f86dba3f41cdf394ab3c57bd105cb96bec70337c6c19a09ca794b6f0c36c3d04119c7c39@[::]:30303
INFO [09-09|10:40:38] IPC endpoint opened: /Users/one/Library/Ethereum/geth.ipc
Welcome to the Geth JavaScript console!

instance: Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9
coinbase: 0xe7a614776754b7c7ef3a1ef6430d29e90411fd75
at block: 0 (Thu, 01 Jan 1970 08:00:00 CST)
datadir: /Users/one/Library/Ethereum
modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 
</code></pre><p>能在控制台中执行多种命令，具体见官方文档：<a href="https://github.com/ethereum/go-ethereum/wiki/JavaScript-Console">JavaScript-Console Wiki</a>。 这是一个交互式的Javascript执行环境，在这里面可以执行Javascript代码，其中&gt;是命令提示符。在这个环境里也内置了一些用来操作以太坊的Javascript对象，可以直接使用这些对象。这些对象主要包括：</p><ul><li>eth：包含一些跟操作区块链相关的方法</li><li>net：包含以下查看p2p网络状态的方法</li><li>admin：包含一些与管理节点相关的方法</li><li>miner：包含启动&amp;停止挖矿的一些方法</li><li>personal：主要包含一些管理账户的方法</li><li>txpool：包含一些查看交易内存池的方法</li><li>web3：包含了以上对象，还包含一些单位换算的方法</li></ul><h2 id="启动挖矿">启动挖矿</h2><p>如果你之前有部署运行过以太坊，请先将此目录下的DAG文件删除<code>rm -rf $HOME/.ethash/</code>。</p><p>参数说明</p><pre><code class="language-shell">--nodiscover
</code></pre><p>使用这个命令可以确保你的节点不会被<strong>非手动</strong>添加你的人发现。否则，你的节点可能因为你与他有相同的创世文件和网络ID而被陌生人的区块链无意添加。</p><pre><code class="language-shell">--maxpeers 0
</code></pre><p>如果你不希望其他人连接到你的测试链，可以使用maxpeers 0。反之，如果你确切知道希望多少人连接到你的节点，你也可以通过调整数字来实现。</p><pre><code class="language-shell">--rpc
</code></pre><p>这个指令可以激活你节点上的RPC界面。它在geth中通常被默认激活。</p><pre><code class="language-shell">--rpcapi &quot;db,eth,net,web3&quot;
</code></pre><p>这个命令可以决定允许什么API通过RPC进入。在默认情况下，geth可以在RPC激活web3界面。 <strong>记住</strong>：在RPC/IPC界面提供API，会使每个可以进入这个界面（例如dapp&rsquo;s）的人都有权限访问这个API。注意你激活的是哪个API。Geth会默认激活IPC界面上所有的API，以及RPC界面上的db,eth,net和web3 API。</p><pre><code class="language-shell">--rpcport &quot;8080&quot;
</code></pre><p>将8000改变为你网络上开放的任何端口。Geth的默认设置是8080.</p><pre><code>```shell
--rpccorsdomain &quot;https://yushuangqi.com&quot;
</code></pre><p>这个可以指示什么URL能连接到你的节点来执行RPC定制端任务。务必谨慎，输入一个特定的URL而不是wildcard ( * )，后者会使所有的URL都能连接到你的RPC实例。</p><pre><code class="language-shell">--datadir &quot;/home/TestChain1&quot;
</code></pre><p>这是你的私有链数据所储存在的数据目录（在nubits下）。选择一个与你以太坊公有链文件夹分开的位置。</p><pre><code class="language-shell">--identity &quot;TestnetMainNode&quot;
</code></pre><p>这会为你的节点设置一个身份，使之更容易在端点列表中被辨认出来。这个例子说明了这些身份如何在网络上出现。</p><pre><code class="language-shell">--networkid 1999
</code></pre><p>数字，区分与其他的网络ID，以太坊公链的网络ID=1。必须区分，以放置钱包等误认为是以太坊公链。 ,2=Morden (disused), 3=Ropsten, 4=Rinkeby，默认为1。</p><pre><code class="language-shell">--port 30303
</code></pre><p>P2P网络监听端口，默认30303。</p><pre><code class="language-shell">--fast 
</code></pre><p>这个命令是 Geth1.6.0之前的，只会被改成<code>--syncmode=fast</code>，但该命令继续有效。配置此命令能够快速的同步区块</p><pre><code class="language-shell">--cache=1024
</code></pre><p>程序内置的可用内存，单位MB。默认是16MB(最小值)。可以根据服务器能力配置到56, 512, 1024 (1GB), or 2048 (2GB)。</p><pre><code class="language-shell">geth --identity &quot;OneTestETH&quot; --rpccorsdomain &quot;*&quot; --nodiscover --rpcapi &quot;*&quot;  --fast --cache=1024 --networkid 1999  console
</code></pre><p>进入控制台后，可以启动矿工开始挖矿。</p><pre><code class="language-shell">&gt; miner.start(1)
</code></pre><p>这里的<code>1</code>表示只使用一个线程运行，如果配置过高我的MAC会卡。</p><pre><code class="language-text">INFO [09-09|11:17:36] Updated mining threads                  threads=1
INFO [09-09|11:17:36] Transaction pool price threshold updated price=18000000000
INFO [09-09|11:17:36] Starting mining operation
null
&gt; INFO [09-09|11:17:36] Commit new mining work                  number=1 txs=0 uncles=0 elapsed=134.574µs
INFO [09-09|11:17:38] Generating DAG in progress              epoch=0 percentage=0 elapsed=1.051s
INFO [09-09|11:17:39] Generating DAG in progress              epoch=0 percentage=1 elapsed=2.087s
INFO [09-09|11:17:40] Generating DAG in progress              epoch=0 percentage=2 elapsed=3.129s
INFO [09-09|11:17:41] Generating DAG in progress              epoch=0 percentage=3 elapsed=4.229s
......
INFO [09-09|11:19:24] Generating DAG in progress              epoch=0 percentage=98 elapsed=1m47.287s
INFO [09-09|11:19:25] Generating DAG in progress              epoch=0 percentage=99 elapsed=1m48.790s
INFO [09-09|11:19:25] Generated ethash verification cache      epoch=0 elapsed=1m48.792s
INFO [09-09|11:19:29] Generating DAG in progress              epoch=1 percentage=0  elapsed=1.365s
INFO [09-09|11:19:30] Generating DAG in progress              epoch=1 percentage=1  elapsed=2.666s
INFO [09-09|11:19:31] Successfully sealed new block            number=1 hash=19b30c…c712b6
INFO [09-09|11:19:31] 🔨 mined potential block                  number=1 hash=19b30c…c712b6
INFO [09-09|11:19:31] Commit new mining work                  number=2 txs=0 uncles=0 elapsed=421.087µs

</code></pre><p>第一次运行时将开始创建DAG文件，只需等待进度条到100，则将开始挖矿。 实际你看到的挖矿速度很快，这是因为我们已经在初始化创世区块时配置为:<code>&quot;nonce&quot;: &quot;0x0000000000000042&quot;</code>。 &ldquo;0x42&rdquo;难度能让你在私有测试网链上快速挖以太币。几分钟就会有上百个以太币，远远超过了在网络上测试交易所需的数量。</p><pre><code class="language-text">coinbase: 0xe7a614776754b7c7ef3a1ef6430d29e90411fd75
</code></pre><p>挖矿时必然有矿工账户，而系统默认使用创建的第一个账号。</p><pre><code class="language-shell">&gt; miner.stop()
</code></pre><p>停止挖矿，此时可以查看将挖出不少以太币。在控制台中可查询矿工余额。</p><pre><code class="language-shell">&gt; eth.accounts
</code></pre><p>这会返回到你拥有的账户地址排列。</p><pre><code class="language-shell">&gt; eth.getBalance(eth.accounts[0])
</code></pre><p>这个控制台指令会返回到你第一个以太坊地址。因为我们只创建了一个账号，也将是矿工的账号。 而<code>eth.getBalance()</code>返回的余额是以太币的最小面额wei，</p><pre><code class="language-shell">&gt; primary = eth.accounts[0]
&gt; balance = web3.fromWei(eth.getBalance(primary), &quot;ether&quot;);
</code></pre><p>将返回矿工的以太币余额，将wei转换为以太币ether。</p><h2 id="安装使用以太坊钱包">安装使用以太坊钱包</h2><p>以太坊钱包，当前以改名为Mist，到<a href="https://ethereum.org/">以太坊官网</a>下载最新版本。 <img src="https://static.yushuangqi.com/blog/2017/42295563.png" alt=""> 下载后，启动Mist,稍等片刻将在右上角显示<code>PRIVATE-NEW</code>，随后点击[Launch Application]进入主页。 <img src="https://static.yushuangqi.com/blog/2017/42012731.png" alt=""> 主页左下角红色标记为私有链，中间账号显示的是前面步骤中创建的账号，并有注明为主账号。</p><p><img src="https://static.yushuangqi.com/blog/2017/42169193.png" alt=""> 此时你可以继续使用命令新建账号，也可在钱包中创建账号。以太坊钱包Mist使用教程请另行<a href="https://github.com/EthFans/wiki/wiki/以太坊钱包-Mist-使用教程">查看</a>。</p><h2 id="结尾">结尾</h2><p>不知是否有疑问以太坊钱包Mist是如何关联上你运行的私有链的？</p><p>这是因为在运行私有链控制台时，实际以开启了IPC服务，显示的路径为：</p><pre><code class="language-text">INFO [09-09|10:40:38] IPC endpoint opened: /Users/one/Library/Ethereum/geth.ipc
</code></pre><p>而钱包在启动时默认在本机查找的IPC路径，而Mac OS上默认查找路径为: <code>$HOME/Library/Ethereum/geth.ipc</code>。所以钱包启动后能自动识别到你的私有链。 其他OS的默认查找路径如下,具体可查看<a href="https://github.com/ethereum/mist/blob/master/modules/settings.js#L248">源代码</a></p><ul><li>windows: .\pipe\geth.ipc</li><li>linux: /.ethereum/geth.ipc</li><li>freebsd: /.ethereum/geth.ipc</li><li>sunos: /.ethereum/geth.ipc</li></ul><p>至此，如上为Mac下搭建运行以太坊私有链环境的操作过程，如有疑问可在下方留言。</p></div><div style="height:130px"><div class="post-copyright" style="float:left"><p class="copyright-item"><span class="item-title">文章作者</span> <span class="item-content">虞双齐</span></p><p class="copyright-item"><span class="item-title">上次更新</span> <span class="item-content">2017-09-09</span></p><p class="copyright-item"><span class="item-title">许可协议</span> <span class="item-content"><a target="_blank" rel="license noopener external nofollow" href="https://creativecommons.org/licenses/by/4.0/deed.zh">署名 4.0 国际</a></span></p></div><div class="post-copyright" style="float:right"><a href="https://info.flagcounter.com/8B1z" target="_blank" rel="noopener external nofollow"><img src="https://s05.flagcounter.com/countxl/8B1z/bg_FFFFFF/txt_000000/border_CCCCCC/columns_4/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/percent_0/" alt="Flag Counter" border="0"></a></div></div><div class="post-reward"><input type="checkbox" name="reward" id="reward" hidden> <label class="reward-button" for="reward">赞赏支持</label><div class="qr-code"><label class="qr-code-image" for="reward"><img class="image" src="/img/donateMe_wechat.png"> <span>微信打赏</span></label></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%E4%BB%A5%E5%A4%AA%E5%9D%8A.html">以太坊</a></div><nav class="post-nav"><a class="prev" href="/blog/2017/qukuailian-bitebi-xuexi-luxian-ziyuan.html"><i class="iconfont icon-left"></i> <span class="prev-text nav-default">区块链比特币学习路线与资源</span> <span class="prev-text nav-mobile">上一篇</span> </a><a class="next" href="/blog/2017/ji-shu-da-niu-cheng-zhang.html"><span class="next-text nav-default">技术大牛成长</span> <span class="prev-text nav-mobile">下一篇</span> <i class="iconfont icon-right"></i></a></nav></footer><div class="disqus-button" id="load_disqus" onclick="load_disqus()">显示 Disqus 评论</div><div id="disqus_thread"></div><script type="text/javascript">function load_disqus() {
        
        
        if (window.location.hostname === 'localhost') return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'yushuangqi';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

        $('#load_disqus').remove();
    };</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></article></div></div></main><footer id="footer" class="footer"><div class="social-links"><a href="mailto:ysqi@yushuangqi.com" rel="me" class="iconfont icon-email" title="email"></a> <a href="http://github.com/ysqi" rel="me" class="iconfont icon-github" title="github"></a> <a href="https://weibo.com/234665601" rel="me" class="iconfont icon-weibo" title="weibo"></a> <a href="https://www.zhihu.com/people/_ysqi/" rel="me" class="iconfont icon-zhihu" title="zhihu"></a> <a href="https://yushuangqi.com/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a></div><div class="copyright"><span class="power-by">Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a> </span><span class="division">|</span> <span class="theme-info">Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a> </span><span class="copyright-year">&copy; 2014 - 2021 <span class="heart"><i class="iconfont icon-heart"></i> </span><span class="author">虞双齐 | <a href="https://beian.miit.gov.cn/">粤ICP备14032560号</a></span></span></div></footer><div class="back-to-top" id="back-to-top"><i class="iconfont icon-up"></i></div></div><script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script><script type="text/javascript" src="/dist/jane.min.js?v=2.7.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });</script><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script><script id="baidu_analytics">var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?a16b3275b071ec0efc507a05422a7156";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();</script></body></html>