<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Golang学习摘录四:包 - 虞双齐的博客</title><link rel="alternate" hreflang="zh" href="https://yushuangqi.com"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="MobileOptimized" content="width"><meta name="HandheldFriendly" content="true"><meta name="applicable-device" content="pc,mobile"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="theme-color" content="#f8f5ec"><meta name="msapplication-navbutton-color" content="#f8f5ec"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec"><meta name="mobile-web-app-capable" content="yes"><meta name="author" content="虞双齐"><meta name="description" content="包是函数和数据的集合。用 package 关键字定义一个包。文件名不需要与包名 一致。包名的约定是使用小写字符。Go 包可以由多个文件组成,但是使用相同的 package &amp;lt;name&amp;gt; 这"><meta name="keywords" content="智能合约开发, Go语言, 区块链技术"><meta name="generator" content="Hugo 0.37.1"><link rel="canonical" href="https://yushuangqi.com/blog/2017/golangxue-xi-zhai-lu-si-bao.html"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link href="/dist/jane.min.css?v=2.7.0" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous"><meta property="og:title" content="Golang学习摘录四:包"><meta property="og:description" content="包是函数和数据的集合。用 package 关键字定义一个包。文件名不需要与包名 一致。包名的约定是使用小写字符。Go 包可以由多个文件组成,但是使用相同的 package &lt;name&gt; 这"><meta property="og:type" content="article"><meta property="og:url" content="https://yushuangqi.com/blog/2017/golangxue-xi-zhai-lu-si-bao.html"><meta property="article:published_time" content="2017-02-24T08:31:54&#43;08:00"><meta property="article:modified_time" content="2017-02-24T08:31:54&#43;08:00"><meta itemprop="name" content="Golang学习摘录四:包"><meta itemprop="description" content="包是函数和数据的集合。用 package 关键字定义一个包。文件名不需要与包名 一致。包名的约定是使用小写字符。Go 包可以由多个文件组成,但是使用相同的 package &lt;name&gt; 这"><meta itemprop="datePublished" content="2017-02-24T08:31:54&#43;08:00"><meta itemprop="dateModified" content="2017-02-24T08:31:54&#43;08:00"><meta itemprop="wordCount" content="1706"><meta itemprop="keywords" content="golang,"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Golang学习摘录四:包"><meta name="twitter:description" content="包是函数和数据的集合。用 package 关键字定义一个包。文件名不需要与包名 一致。包名的约定是使用小写字符。Go 包可以由多个文件组成,但是使用相同的 package &lt;name&gt; 这"><!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]--><!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]--></head><body><div id="mobile-navbar" class="mobile-navbar"><div class="mobile-header-logo"><a href="/" class="logo">虞双齐的博客</a></div><div class="mobile-navbar-icon"><span></span> <span></span> <span></span></div></div><nav id="mobile-menu" class="mobile-menu slideout-menu"><ul class="mobile-menu-list"><a href="/"><li class="mobile-menu-item">首页</li></a><a href="/series.html"><li class="mobile-menu-item">专题</li></a><a href="/categories.html"><li class="mobile-menu-item">分类</li></a><a href="/tags.html"><li class="mobile-menu-item">标签</li></a><a href="/post.html"><li class="mobile-menu-item">归档</li></a><a href="/about.html"><li class="mobile-menu-item">关于</li></a></ul></nav><header id="header" class="header container"><div class="logo-wrapper"><a href="/" class="logo">虞双齐的博客</a></div><nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item"><a class="menu-item-link" href="/">首页</a></li><li class="menu-item"><a class="menu-item-link" href="/series.html">专题</a></li><li class="menu-item"><a class="menu-item-link" href="/categories.html">分类</a></li><li class="menu-item"><a class="menu-item-link" href="/tags.html">标签</a></li><li class="menu-item"><a class="menu-item-link" href="/post.html">归档</a></li><li class="menu-item"><a class="menu-item-link" href="/about.html">关于</a></li></ul></nav></header><div id="mobile-panel"><main id="main" class="main bg-llight"><div class="content-wrapper"><div id="content" class="content container"><article class="post bg-white"><header class="post-header"><h1 class="post-title">Golang学习摘录四:包</h1><div class="post-meta"><span class="post-time">2017-02-24</span><div class="post-category"><a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%BC%80%E5%8F%91.html">编程语言与开发</a></div><span class="more-meta">约 1706 字 </span><span class="more-meta">预计阅读 4 分钟</span></div></header><div class="post-toc" id="post-toc"><h2 class="post-toc-title">文章目录</h2><div class="post-toc-content always-active"><nav id="TableOfContents"><ul><li><ul><li><a href="#包的文档">包的文档</a></li><li><a href="#测试包">测试包</a></li><li><a href="#常用的包">常用的包</a></li></ul></li></ul></nav></div></div><div class="post-content"><p>包是函数和数据的集合。用 package 关键字定义一个包。文件名不需要与包名 一致。包名的约定是使用小写字符。Go 包可以由多个文件组成,但是使用相同的 package &lt;name&gt; 这一行。</p><pre><code>package even
func Even(i int) bool {
  return i%2==0
}
func odd(i int) bool {
  return i%2==1
}
</code></pre><p>名称以大写字母起始的是可导出的，可以在包的外部调用。<br>共有函数的名称以大写字母开头。<br>私有函数的名称以小写字母开头。</p><pre><code>package main
import ( //导入下面的包
  &quot;event&quot; //本地包even在这里导入
  &quot;fmt&quot;
)
func main(){
  i := 5
  fmt.Printf(&quot;Is %d event? %v\n&quot;, i,event.Even(i))// 调用even包中的函数。访问一个包中的函数的语法是&lt;package&gt;.Function()。
}
</code></pre><p>Go程序的命名规则：包名约定小写字母开头；方法名最好使用驼峰式名称，避免使用下划线，方法名应简洁清晰。</p><h2 id="包的文档">包的文档</h2><p>每个包都应该有包注释,在 package 前的一个注释块。对于多文件包,包注释只需要 出现在一个文件前,任意一个文件都可以。包注释应当对包进行介绍,并提供相关于 包的整体信息。这会出现在 go doc 生成的关于包的页面上,并且相关的细节会一并 显示。<br>官方regexp包的例子：</p><pre><code> /*
       The regexp package implements a simple library for
       regular expressions.
       The syntax of the regular expressions accepted is:
       regexp:
           concatenation  '|' concatenation
   */
   package regexp
</code></pre><p>每个定义（并且导出）的函数应当有一小段文字描述该函数的行为。<br>fmt包的例子：</p><pre><code>   // Printf formats according to a format specifier and writes to standard
   // output. It returns the number of bytes written and any write error
   // encountered.
   func Printf(format string, a ...interface) (n int, err error)
</code></pre><h2 id="测试包">测试包</h2><p>在Go中为包编写单元测试应当是一种习惯。编写测试需要包含testing包和程序go test。两者都有良好的文档。<br>go test程序调用了所有的测试函数。<br>even包没有定义任何测试函数，执行go test，是这样的：</p><pre><code>% go test
?    even  [no test files]
</code></pre><p>在测试文件中定义一个测试来修复这个。测试文件也在包目录中，被命名为*_rest.go。这些测试文件同Go程序中的其他文件一样，但是go test只会执行测试函数。每个测试函数都有相同的标示，他的名字以Test开头：</p><pre><code>func TestXxx(t *testing.T)
</code></pre><p>编写测试时，需要告诉go test测试是失败还是成功。测试成功则直接返回。当测 试失败可以用下面的函数标记 。</p><pre><code>func (t *T) Fail() // Fail标记测试函数失败，但仍然继续执行。
func (t *T) FailNow() // FailNow标记测试函数失败，并且中断其执行。当前文件中的其余的测试将被跳过,然后执行下一个文件中的测试。
func (t *T) Log(args ...interface{}) // Log 用默认格式对其参数进行格式化,与 Print() 类似,并且记录文本到错误日志。
func (t *T) Fatal(args ...interface{}) // Fatal 等价于 Log() 后跟随 FailNow()。
</code></pre><p>event_test.go</p><pre><code>package even // 测试使用与被测试的包使用相同的名称空间
import &quot;testing&quot;
func TestEven(t *testing.T) { // 定义测试函数
  if ! Even(2) { 
    t.Log(&quot;should be even!&quot;) 
    t.Fail() 
  }
}
</code></pre><h2 id="常用的包">常用的包</h2><p>标准的 Go 代码库中包含了大量的包,并且在安装 Go 的时候多数会伴随一起安装。浏 览 \$GOROOT/src/pkg 目录并且查看那些包会非常有启发。</p><ul><li>fmt<br>包 fmt 实现了格式化的 I/O 函数,这与 C 的 printf 和 scanf 类似。格式化短语 派生于 C 。一些短语(%-序列)这样使用:<br>%v<br>默认格式的值。当打印结构时,加号(%+v)会增加字段名; %#v<br>Go 样式的值表达;<br>%T<br>带有类型的 Go 样式的值表达;</li><li>io<br>这个包提供了原始的 I/O 操作界面。它主要的任务是对 os 包这样的原始的 I/O 进 行封装,增加一些其他相关,使其具有抽象功能用在公共的接口上。</li><li>bufio<br>这个包实现了缓冲的 I/O。它封装于 io.Reader 和 io.Writer 对象,创建了另 一个对象(Reader 和 Writer)在提供缓冲的同时实现了一些文本 I/O 的功能。</li><li>sort<br>sort 包提供了对数组和用户定义集合的原始的排序功能。</li><li>strconv<br>strconv 包提供了将字符串转换成基本数据类型,或者从基本数据类型转换为字 符串的功能。</li><li>os<br>os 包提供了与平台无关的操作系统功能接口。其设计是 Unix 形式的。</li><li>sync<br>sync 包提供了基本的同步原语,例如互斥锁。</li><li>flag<br>flag 包实现了命令行解析。参阅 “命令行参数” 在第 92 页。</li><li>encoding/json<br>encoding/json 包实现了编码与解码 RFC 4627 [2] 定义的 JSON 对象。</li><li>html/template<br>数据驱动的模板,用于生成文本输出,例如 HTML。<br>将模板关联到某个数据结构上进行解析。模板内容指向数据结构的元素(通常结 构的字段或者 map 的键)控制解析并且决定某个值会被显示。模板扫描结构以 便解析,而 “游标” @ 决定了当前位置在结构中的值。</li><li>net/http<br>net/http 实现了 HTTP 请求、响应和 URL 的解析,并且提供了可扩展的 HTTP 服 务和基本的 HTTP 客户端。</li><li>unsafe<br>unsafe 包包含了 Go 程序中数据类型上所有不安全的操作。通常无须使用这个。</li><li>reflect<br>reflect 包实现了运行时反射,允许程序通过抽象类型操作对象。通常用于处理静 态类型 interface{} 的值,并且通过 Typeof 解析出其动态类型信息,通常会返回 一个有接口类型 Type 的对象。</li><li>os/exec<br>os/exec 包执行外部命令。</li></ul></div><div style="height:130px"><div class="post-copyright" style="float:left"><p class="copyright-item"><span class="item-title">文章作者</span> <span class="item-content">虞双齐</span></p><p class="copyright-item"><span class="item-title">上次更新</span> <span class="item-content">2017-02-24</span></p><p class="copyright-item"><span class="item-title">许可协议</span> <span class="item-content"><a target="_blank" rel="license noopener external nofollow" href="https://creativecommons.org/licenses/by/4.0/deed.zh">署名 4.0 国际</a></span></p></div><div class="post-copyright" style="float:right"><a href="https://info.flagcounter.com/8B1z" target="_blank" rel="noopener external nofollow"><img src="https://s05.flagcounter.com/countxl/8B1z/bg_FFFFFF/txt_000000/border_CCCCCC/columns_4/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/percent_0/" alt="Flag Counter" border="0"></a></div></div><div class="post-reward"><input type="checkbox" name="reward" id="reward" hidden> <label class="reward-button" for="reward">赞赏支持</label><div class="qr-code"><label class="qr-code-image" for="reward"><img class="image" src="/img/donateMe_wechat.png"> <span>微信打赏</span></label></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/golang.html">golang</a></div><nav class="post-nav"><a class="prev" href="/blog/2017/golangxue-xi-zhai-lu-liu-jie-kou.html"><i class="iconfont icon-left"></i> <span class="prev-text nav-default">Golang学习摘录六:接口</span> <span class="prev-text nav-mobile">上一篇</span> </a><a class="next" href="/blog/2017/go-reflectbao.html"><span class="next-text nav-default">Goreflect包</span> <span class="prev-text nav-mobile">下一篇</span> <i class="iconfont icon-right"></i></a></nav></footer><div class="disqus-button" id="load_disqus" onclick="load_disqus()">显示 Disqus 评论</div><div id="disqus_thread"></div><script type="text/javascript">function load_disqus() {
        
        
        if (window.location.hostname === 'localhost') return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'yushuangqi';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

        $('#load_disqus').remove();
    };</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></article></div></div></main><footer id="footer" class="footer"><div class="social-links"><a href="mailto:ysqi@yushuangqi.com" rel="me" class="iconfont icon-email" title="email"></a> <a href="http://github.com/ysqi" rel="me" class="iconfont icon-github" title="github"></a> <a href="https://weibo.com/234665601" rel="me" class="iconfont icon-weibo" title="weibo"></a> <a href="https://www.zhihu.com/people/_ysqi/" rel="me" class="iconfont icon-zhihu" title="zhihu"></a> <a href="https://yushuangqi.com/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a></div><div class="copyright"><span class="power-by">Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a> </span><span class="division">|</span> <span class="theme-info">Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a> </span><span class="copyright-year">&copy; 2014 - 2021 <span class="heart"><i class="iconfont icon-heart"></i> </span><span class="author">虞双齐 | <a href="https://beian.miit.gov.cn/">粤ICP备14032560号</a></span></span></div></footer><div class="back-to-top" id="back-to-top"><i class="iconfont icon-up"></i></div></div><script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script><script type="text/javascript" src="/dist/jane.min.js?v=2.7.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });</script><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script><script id="baidu_analytics">var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?a16b3275b071ec0efc507a05422a7156";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();</script></body></html>